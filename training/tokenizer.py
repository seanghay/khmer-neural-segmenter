class Tokenizer:
  def __init__(self):
    self.vocab = [
      " ",
      "!",
      "#",
      "$",
      "%",
      "&",
      "(",
      ")",
      "+",
      ",",
      "-",
      ".",
      "/",
      "0",
      "1",
      "2",
      "3",
      "4",
      "5",
      "6",
      "7",
      "8",
      "9",
      ":",
      ";",
      "=",
      "?",
      "@",
      "A",
      "B",
      "C",
      "D",
      "E",
      "F",
      "G",
      "H",
      "I",
      "J",
      "K",
      "L",
      "M",
      "N",
      "O",
      "P",
      "Q",
      "R",
      "S",
      "T",
      "U",
      "V",
      "W",
      "X",
      "Y",
      "Z",
      "_",
      "a",
      "b",
      "c",
      "d",
      "e",
      "f",
      "g",
      "h",
      "i",
      "j",
      "k",
      "l",
      "m",
      "n",
      "o",
      "p",
      "q",
      "r",
      "s",
      "t",
      "u",
      "v",
      "w",
      "x",
      "y",
      "z",
      "«",
      "°",
      "»",
      "á",
      "é",
      "ë",
      "ó",
      "ö",
      "ü",
      "ក",
      "ខ",
      "គ",
      "ឃ",
      "ង",
      "ច",
      "ឆ",
      "ជ",
      "ឈ",
      "ញ",
      "ដ",
      "ឋ",
      "ឌ",
      "ឍ",
      "ណ",
      "ត",
      "ថ",
      "ទ",
      "ធ",
      "ន",
      "ប",
      "ផ",
      "ព",
      "ភ",
      "ម",
      "យ",
      "រ",
      "ល",
      "វ",
      "ស",
      "ហ",
      "ឡ",
      "អ",
      "ឤ",
      "ឥ",
      "ឦ",
      "ឧ",
      "ឪ",
      "ឫ",
      "ឬ",
      "ឭ",
      "ឮ",
      "ឯ",
      "ឱ",
      "ឲ",
      "ា",
      "ិ",
      "ី",
      "ឹ",
      "ឺ",
      "ុ",
      "ូ",
      "ួ",
      "ើ",
      "ឿ",
      "ៀ",
      "េ",
      "ែ",
      "ៃ",
      "ោ",
      "ៅ",
      "ំ",
      "ះ",
      "ៈ",
      "៉",
      "៊",
      "់",
      "៌",
      "៍",
      "៏",
      "័",
      "្",
      "។",
      "៕",
      "៖",
      "ៗ",
      "៘",
      "៛",
      "០",
      "១",
      "២",
      "៣",
      "៤",
      "៥",
      "៦",
      "៧",
      "៨",
      "៩",
    ]

    self.pad_id = 0
    self.bos_id = 1
    self.eos_id = 2
    self.unk_id = 3

  def __len__(self):
    return len(self.vocab) + 4

  def decode(self, ids) -> str:
    return "".join([self.vocab[i - 4] for i in ids if i - 4 >= 0])

  def encode(self, text: str):
    return [(self.vocab.index(c) + 4) if c in self.vocab else self.unk_id for c in text]


if __name__ == "__main__":
  t = Tokenizer()
  ids = t.encode("មិនដឹង")
  print(t.decode(ids), len(t))
